{"ast":null,"code":"import _regeneratorRuntime from \"/Users/user1/Desktop/linkedin_data_proj/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/user1/Desktop/linkedin_data_proj/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/user1/Desktop/linkedin_data_proj/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/user1/Desktop/linkedin_data_proj/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/user1/Desktop/linkedin_data_proj/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/user1/Desktop/linkedin_data_proj/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/user1/Desktop/linkedin_data_proj/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/user1/Desktop/linkedin_data_proj/client/src/components/pages/RegisterPage.js\";\nimport React from \"react\";\nimport { Grid, Row, Col, Form, FormGroup, FormControl, ControlLabel, Button } from \"react-bootstrap\";\nimport debounce from 'lodash/debounce';\nvar pwMinLen = 6;\n\nvar RegisterPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RegisterPage, _React$Component);\n\n  function RegisterPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RegisterPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RegisterPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      bio: \"\",\n      gender: \"Woman\",\n      genderWanted: \"Woman\",\n      authenticated: false,\n      userExists: false\n    };\n\n    _this.handleNameInput = function (e) {\n      return _this.setState({\n        name: e.target.value\n      });\n    };\n\n    _this.handleEmailInput = function (e) {\n      _this.setState({\n        email: e.target.value,\n        errorMessage: \"\"\n      });\n\n      _this.handleValidation(e.target.value, _this.state.password);\n    };\n\n    _this.handlePasswordInput = function (e) {\n      _this.setState({\n        password: e.target.value,\n        errorMessage: \"\"\n      });\n\n      _this.handleValidation(_this.state.email, e.target.value);\n    };\n\n    _this.handleValidation = debounce(function (email, password) {\n      if (email.includes('@') && password.length >= pwMinLen) {\n        _this.checkUserExists().then(function (res) {\n          if (res.exists == 'Yes') {\n            _this.setState({\n              authenticated: false\n            });\n\n            _this.setState({\n              userExists: true\n            });\n          } else {\n            _this.setState({\n              authenticated: true\n            });\n\n            _this.setState({\n              userExists: false\n            });\n          }\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      } else {\n        _this.setState({\n          authenticated: false\n        });\n      }\n    }, 500);\n\n    _this.handleGenderSelect = function (e) {\n      return _this.setState({\n        gender: e.target.value\n      });\n    };\n\n    _this.handleGenderWantedSelect = function (e) {\n      return _this.setState({\n        genderWanted: e.target.value\n      });\n    };\n\n    _this.handleBioInput = function (e) {\n      return _this.setState({\n        bio: e.target.value\n      });\n    };\n\n    _this.handleSubmit = function () {\n      if (_this.state.userExists) {\n        _this.setState({\n          errorMessage: \"This email is already associated with an account\"\n        });\n      } else if (!_this.state.authenticated) {\n        _this.setState({\n          errorMessage: \"Please enter a valid email and password\"\n        });\n      } else {\n        _this.props.updateName(_this.state.name);\n\n        _this.props.updateEmail(_this.state.email);\n\n        _this.props.updatePassword(_this.state.password);\n\n        _this.props.updateBio(_this.state.bio);\n\n        _this.props.updateGender(_this.state.gender);\n\n        _this.props.updateGenderWanted(_this.state.genderWanted);\n\n        _this.sendUserInfo().then(function (res) {\n          console.log(res.confirmation);\n        }).catch(function (err) {\n          return console.log(err);\n        });\n      }\n    };\n\n    _this.checkUserExists =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, body;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch('/api/check_user_exists', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  email: _this.state.email\n                })\n              });\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return response.json();\n\n            case 5:\n              body = _context.sent;\n\n              if (!(response.status !== 200)) {\n                _context.next = 8;\n                break;\n              }\n\n              throw Error(body.message);\n\n            case 8:\n              return _context.abrupt(\"return\", body);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n    _this.sendUserInfo =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var response, body;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch('/api/create_user', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  name: _this.state.name,\n                  email: _this.state.email,\n                  password: _this.state.password,\n                  bio: _this.state.bio,\n                  gender: _this.state.gender,\n                  genderWanted: _this.state.genderWanted\n                })\n              });\n\n            case 2:\n              response = _context2.sent;\n              _context2.next = 5;\n              return response.json();\n\n            case 5:\n              body = _context2.sent;\n\n              if (!(response.status !== 200)) {\n                _context2.next = 8;\n                break;\n              }\n\n              throw Error(body.message);\n\n            case 8:\n              return _context2.abrupt(\"return\", body);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    _this.render = function () {\n      return React.createElement(\"div\", {\n        className: \"pink full-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"page-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"page-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Create a New Profile\")), React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Form, {\n        horizontal: true,\n        className: \"full-width padding-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        controlId: \"loginFormName\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        lg: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"What's your name?\"), React.createElement(Col, {\n        lg: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: _this.handleNameInput,\n        type: \"text\",\n        placeholder: \"Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        controlId: \"loginFormEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        lg: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"What's your email?\"), React.createElement(Col, {\n        lg: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        className: _this.emailValidityClass(),\n        onChange: _this.handleEmailInput,\n        type: \"text\",\n        placeholder: \"Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        controlId: \"loginFormPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        lg: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"What's your password?\"), React.createElement(Col, {\n        lg: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        className: _this.passwordValidityClass(),\n        onChange: _this.handlePasswordInput,\n        type: \"text\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        controlId: \"loginFormGender\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        lg: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"What's your gender?\"), React.createElement(Col, {\n        lg: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: _this.handleGenderSelect,\n        componentClass: \"select\",\n        placeholder: \"Woman\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"Woman\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Woman\"), React.createElement(\"option\", {\n        value: \"Man\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Man\"), React.createElement(\"option\", {\n        value: \"Other\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Other\"))))), React.createElement(FormGroup, {\n        controlId: \"loginFormGenderWanted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        lg: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Who are you looking for?\"), React.createElement(Col, {\n        lg: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: _this.handleGenderWantedSelect,\n        componentClass: \"select\",\n        placeholder: \"Woman\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"Woman\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Woman\"), React.createElement(\"option\", {\n        value: \"Man\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Man\"), React.createElement(\"option\", {\n        value: \"Other\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Other\"))))), React.createElement(FormGroup, {\n        controlId: \"loginFormBio\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Col, {\n        componentClass: ControlLabel,\n        lg: 4,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Say a few words about yourself...\"), React.createElement(Col, {\n        lg: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        onChange: _this.handleBioInput,\n        componentClass: \"textarea\",\n        placeholder: \"Your Bio\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      })))), React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(ControlLabel, {\n        className: \"error-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, _this.state.errorMessage)), React.createElement(\"input\", {\n        type: \"file\",\n        onChange: _this.fileChangedHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      })), React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }), React.createElement(Col, {\n        lg: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, _this.registerButton))));\n    };\n\n    return _this;\n  }\n\n  _createClass(RegisterPage, [{\n    key: \"emailValidityClass\",\n    value: function emailValidityClass() {\n      if (this.state.email.includes('@')) {\n        return \"green-outline\";\n      } else {\n        return \"red-outline\";\n      }\n    }\n  }, {\n    key: \"passwordValidityClass\",\n    value: function passwordValidityClass() {\n      if (this.state.password.length >= pwMinLen) {\n        return \"green-outline\";\n      } else {\n        return \"red-outline\";\n      }\n    }\n  }, {\n    key: \"registerButton\",\n    get: function get() {\n      return React.createElement(Button, {\n        onClick: this.handleSubmit,\n        bsStyle: \"primary\",\n        bsSize: \"large\",\n        block: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Create Profile\");\n    }\n  }]);\n\n  return RegisterPage;\n}(React.Component);\n\nexport { RegisterPage as default };","map":{"version":3,"sources":["/Users/user1/Desktop/linkedin_data_proj/client/src/components/pages/RegisterPage.js"],"names":["React","Grid","Row","Col","Form","FormGroup","FormControl","ControlLabel","Button","debounce","pwMinLen","RegisterPage","state","name","email","password","bio","gender","genderWanted","authenticated","userExists","handleNameInput","e","setState","target","value","handleEmailInput","errorMessage","handleValidation","handlePasswordInput","includes","length","checkUserExists","then","res","exists","catch","err","console","log","handleGenderSelect","handleGenderWantedSelect","handleBioInput","handleSubmit","props","updateName","updateEmail","updatePassword","updateBio","updateGender","updateGenderWanted","sendUserInfo","confirmation","fetch","method","headers","body","JSON","stringify","response","json","status","Error","message","render","emailValidityClass","passwordValidityClass","fileChangedHandler","registerButton","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Grid, Row, Col, Form, FormGroup, FormControl, ControlLabel, Button} from \"react-bootstrap\";\nimport debounce from 'lodash/debounce';\n\nconst pwMinLen = 6;\n\nexport default class RegisterPage extends React.Component {\n\n    state = {\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        bio: \"\",\n        gender: \"Woman\",\n        genderWanted: \"Woman\",\n        authenticated: false,\n        userExists: false,\n    }\n\n    handleNameInput = (e) =>\n        this.setState({ name: e.target.value });\n\n    handleEmailInput = (e) => {\n        this.setState({ email: e.target.value, errorMessage: \"\" });\n        this.handleValidation(e.target.value, this.state.password)\n    }\n\n    handlePasswordInput = (e) => {\n        this.setState({ password: e.target.value, errorMessage: \"\" });\n        this.handleValidation(this.state.email, e.target.value);\n    }\n\n    handleValidation = debounce((email, password) => {\n        if (email.includes('@') && password.length >= pwMinLen) {\n            this.checkUserExists()\n                .then(res => {\n                    if (res.exists == 'Yes') {\n                        this.setState({ authenticated: false });\n                        this.setState({ userExists: true });\n                    } else {\n                        this.setState({ authenticated: true });\n                        this.setState({ userExists: false });\n                    }\n                })\n                .catch(err => console.log(err));\n        } else {\n            this.setState({ authenticated: false });\n        }\n      }, 500)\n\n    handleGenderSelect = (e) =>\n        this.setState({gender: e.target.value});\n    \n    handleGenderWantedSelect = (e) =>\n        this.setState({genderWanted: e.target.value});\n    \n    handleBioInput = (e) =>\n        this.setState({bio: e.target.value});\n\n    emailValidityClass () {\n        if (this.state.email.includes('@')) {\n            return \"green-outline\";\n        } else {\n            return \"red-outline\";\n        }\n    } \n\n    passwordValidityClass () {\n        if (this.state.password.length >= pwMinLen) {\n            return \"green-outline\";\n        } else {\n            return \"red-outline\";\n        }\n    }\n\n    handleSubmit = () => {\n        if (this.state.userExists) {\n            this.setState({ errorMessage: \"This email is already associated with an account\" });\n        } else if (!this.state.authenticated) {\n            this.setState({ errorMessage: \"Please enter a valid email and password\" });\n        } else {\n            this.props.updateName(this.state.name);\n            this.props.updateEmail(this.state.email);\n            this.props.updatePassword(this.state.password);\n            this.props.updateBio(this.state.bio);\n            this.props.updateGender(this.state.gender);\n            this.props.updateGenderWanted(this.state.genderWanted);\n            this.sendUserInfo()\n                .then(res => {console.log(res.confirmation)})\n                .catch(err => console.log(err));\n        }\n    }\n\n    checkUserExists = async () => {\n        const response = await fetch('/api/check_user_exists', {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n                email: this.state.email,\n              })\n          });\n        const body = await response.json();\n    \n        if (response.status !== 200) throw Error(body.message);\n    \n        return body;\n    };\n\n    sendUserInfo = async () => {\n        const response = await fetch('/api/create_user', {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n                name: this.state.name,\n                email: this.state.email,\n                password: this.state.password,\n                bio: this.state.bio,\n                gender: this.state.gender,\n                genderWanted: this.state.genderWanted,\n              })\n          });\n        const body = await response.json();\n    \n        if (response.status !== 200) throw Error(body.message);\n    \n        return body;\n    };\n\n    get registerButton () {\n        return <Button onClick={this.handleSubmit} bsStyle=\"primary\" bsSize=\"large\" block>\n                Create Profile\n            </Button>    \n    }\n\n    render = () =>\n        <div className=\"pink full-page\">\n            <header className=\"page-header\">\n                <h1 className=\"page-title\">Create a New Profile</h1>\n            </header>\n            <Grid >\n                <Form horizontal className=\"full-width padding-50\">\n                    <FormGroup controlId=\"loginFormName\">\n                        <Row className=\"show-grid\">\n                            <Col componentClass={ControlLabel} lg={4}>\n                                What's your name?\n                            </Col>\n                            <Col lg={6}>\n                                <FormControl \n                                    onChange={this.handleNameInput} \n                                    type=\"text\" \n                                    placeholder=\"Name\" \n                                />\n                            </Col>\n                        </Row>\n                    </FormGroup>\n                    <FormGroup controlId=\"loginFormEmail\">\n                        <Row className=\"show-grid\">\n                            <Col componentClass={ControlLabel} lg={4}>\n                                What's your email?\n                            </Col>\n                            <Col lg={6}>\n                                <FormControl \n                                    className={this.emailValidityClass()} \n                                    onChange={this.handleEmailInput} \n                                    type=\"text\" \n                                    placeholder=\"Email\" \n                                />\n                            </Col>\n                        </Row>\n                    </FormGroup>\n                    <FormGroup controlId=\"loginFormPassword\">\n                        <Row className=\"show-grid\">\n                            <Col componentClass={ControlLabel} lg={4}>\n                                What's your password?\n                            </Col>\n                            <Col lg={6}>\n                                <FormControl \n                                    className={this.passwordValidityClass()} \n                                    onChange={this.handlePasswordInput} \n                                    type=\"text\" \n                                    placeholder=\"Password\" \n                                    />\n                            </Col>\n                        </Row>\n                    </FormGroup>\n                    <FormGroup controlId=\"loginFormGender\">\n                        <Row className=\"show-grid\">\n                            <Col componentClass={ControlLabel} lg={4}>\n                                What's your gender?\n                            </Col>\n                            <Col lg={6}>\n                                <FormControl onChange={this.handleGenderSelect} componentClass=\"select\" placeholder=\"Woman\">\n                                    <option value=\"Woman\">Woman</option>\n                                    <option value=\"Man\">Man</option>\n                                    <option value=\"Other\">Other</option>\n                                </FormControl>\n                            </Col>\n                        </Row>\n                    </FormGroup>\n                    <FormGroup controlId=\"loginFormGenderWanted\">\n                        <Row className=\"show-grid\">\n                            <Col componentClass={ControlLabel} lg={4}>\n                                Who are you looking for?\n                            </Col>\n                            <Col lg={6}>\n                                <FormControl onChange={this.handleGenderWantedSelect} componentClass=\"select\" placeholder=\"Woman\">\n                                    <option value=\"Woman\">Woman</option>\n                                    <option value=\"Man\">Man</option>\n                                    <option value=\"Other\">Other</option>\n                                </FormControl>\n                            </Col>\n                        </Row>\n                    </FormGroup>\n                    <FormGroup controlId=\"loginFormBio\">\n                        <Row className=\"show-grid\">\n                            <Col componentClass={ControlLabel} lg={4}>\n                                Say a few words about yourself...\n                            </Col>\n                            <Col lg={6}>\n                                <FormControl onChange={this.handleBioInput} componentClass=\"textarea\" placeholder=\"Your Bio\" />\n                            </Col>\n                        </Row>\n                    </FormGroup>\n                    <FormGroup>\n                        <ControlLabel className=\"error-message\">{this.state.errorMessage}</ControlLabel>\n                    </FormGroup>\n                    <input type=\"file\" onChange={this.fileChangedHandler}></input>\n                </Form>\n                <Row className=\"show-grid\">\n                    <Col lg={6}>\n                    </Col>\n                    <Col lg={6}>\n                        {this.registerButton}\n                    </Col>\n                </Row>\n            </Grid>\n        </div>\n}"]},"metadata":{},"sourceType":"module"}